Add GoHighLevel lead capture to Site Surgeon:

1) Replit → Secrets:
   GHL_WEBHOOK_URL = <paste your GHL webhook>

2) Confirm webhook code is called after audit:
   - lib/webhook.(mjs|ts) sends JSON { event, contact, site, scores, top_fixes, links }
   - Log 200/4xx status and body for debugging

3) Deploy and test:
   curl -X POST $BASE/api/audit \
     -H 'content-type: application/json' \
     -d '{"url":"https://example.com","email":"owner@example.com","name":"Dr. Test"}'
   - Return JSON and confirm GHL received the payload
GHL workflow setup (quick clicks)
Workflows → + New → From Scratch

Trigger: Incoming Webhook → copy the URL (this is what we set as GHL_WEBHOOK_URL).

Actions:

Find/Create Contact using contact.email

Set Custom Fields (create if needed):

Overall Score (scores.overall)

Report HTML (links.report_html)

Report PDF (links.report_pdf)

Send Email (Day 0) with report links + your Loom walkthrough

If scores.overall < 75 → Create Task: “Call to review top 3 fixes”

Optional: Add to Pipeline → “New Audit” stage

Payload we send (so you can map fields)
json
Copy
Edit
{
  "event": "site_audit_completed",
  "contact": { "email": "owner@acme.com", "name": "Dr. Jane Smith", "source": "SiteSurgeon" },
  "site": { "url": "https://acme.com" },
  "scores": {
    "overall": 77,
    "lighthouse": { "performance": 61, "seo": 86, "bestPractices": 92, "accessibility": 78 },
    "coreWebVitals": { "lcp_ms": 2450, "inp_ms": 180, "cls": 0.07, "passed": true }
  },
  "top_fixes": [
    {"id":"cwv_lcp","title":"Improve LCP","why":"Slow hero","how":"Compress AVIF/WebP + preload","est_hours":1.5},
    {"id":"meta_description","title":"Add meta description","why":"CTR","how":"140–160 chars + CTA","est_hours":0.3},
    {"id":"local_schema","title":"Add LocalBusiness schema","why":"Local trust","how":"JSON-LD NAP/hours","est_hours":0.8}
  ],
  "links": {
    "report_html": "https://…/reports/ab12/report.html",
    "report_pdf": "https://…/reports/ab12/report.pdf",
    "screenshot_mobile": "https://…/reports/ab12/mobile.png"
  }
}
2-minute QA after deploy
Run an audit with your email → contact shows up in GHL, Day-0 email fires.

Open report links from the contact record.

If score < 75, see the task created.

If you drop the GHL webhook URL here, I’ll plug it into your Replit Secrets and kick a live test. After that, we can do a quick frontend walkthrough.